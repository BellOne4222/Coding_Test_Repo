# 1244. [S/W ë¬¸ì œí•´ê²° ì‘ìš©] 2ì¼ì°¨ - ìµœëŒ€ ìƒê¸ˆ

# í€´ì¦ˆ ëŒ€íšŒì— ì°¸ê°€í•´ì„œ ìš°ìŠ¹ì„ í•˜ê²Œ ë˜ë©´ ë³´ë„ˆìŠ¤ ìƒê¸ˆì„ íšë“í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ë¶€ì—¬ë°›ëŠ”ë‹¤.

# ìš°ìŠ¹ìëŠ” ì£¼ì–´ì§„ ìˆ«ìíŒë“¤ ì¤‘ì— ë‘ ê°œë¥¼ ì„ íƒì—ì„œ ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ ì„œë¡œì˜ ìë¦¬ë¥¼ ìœ„ì¹˜ë¥¼ êµí™˜í•  ìˆ˜ ìˆë‹¤.

# ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ê·¸ë¦¼ê³¼ 3, 2, 8, 8, 8 ì˜ 5ê°œì˜ ìˆ«ìíŒë“¤ì´ ì£¼ì–´ì§€ê³  êµí™˜ íšŸìˆ˜ëŠ” 2íšŒë¼ê³  í•˜ì.

# êµí™˜ì „>



# ì²˜ìŒì—ëŠ” ì²«ë²ˆì§¸ ìˆ«ìíŒì˜ 3ê³¼ ë„¤ ë²ˆì§¸ ìˆ«ìíŒì˜ 8ì„ êµí™˜í•´ì„œ 8, 2, 8, 3, 8ì´ ë˜ì—ˆë‹¤.
 


# ë‹¤ìŒìœ¼ë¡œ, ë‘ ë²ˆì§¸ ìˆ«ìíŒ 2ì™€ ë§ˆì§€ë§‰ì— ìˆëŠ” 8ì„ êµí™˜í•´ì„œ 8, 8, 8, 3, 2ì´ ë˜ì—ˆë‹¤.



# ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ êµí™˜ì´ ëë‚˜ë©´ ìˆ«ìíŒì˜ ìœ„ì¹˜ì— ë¶€ì—¬ëœ ê°€ì¤‘ì¹˜ì— ì˜í•´ ìƒê¸ˆì´ ê³„ì‚°ëœë‹¤.

# ìˆ«ìíŒì˜ ì˜¤ë¥¸ìª½ ëì—ì„œë¶€í„° 1ì›ì´ê³  ì™¼ìª½ìœ¼ë¡œ í•œìë¦¬ì”© ê°ˆìˆ˜ë¡ 10ì˜ ë°°ìˆ˜ë§Œí¼ ì»¤ì§„ë‹¤.

# ìœ„ì˜ ì˜ˆì—ì„œì™€ ê°™ì´ ìµœì¢…ì ìœ¼ë¡œ ìˆ«ìíŒë“¤ì´ 8,8,8,3,2ì˜ ìˆœì„œê°€ ë˜ë©´ 88832ì›ì˜ ë³´ë„ˆìŠ¤ ìƒê¸ˆì„ íšë“í•œë‹¤.

# ì—¬ê¸°ì„œ ì£¼ì˜í•  ê²ƒì€ ë°˜ë“œì‹œ íšŸìˆ˜ë§Œí¼ êµí™˜ì´ ì´ë£¨ì–´ì ¸ì•¼ í•˜ê³  ë™ì¼í•œ ìœ„ì¹˜ì˜ êµí™˜ì´ ì¤‘ë³µë˜ì–´ë„ ëœë‹¤.

# ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš° 1íšŒì˜ êµí™˜ íšŸìˆ˜ê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë°˜ë“œì‹œ 1íšŒ êµí™˜ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ê²°ê³¼ê°’ì€ 49ê°€ ëœë‹¤.



# 94ì˜ ê²½ìš° 2íšŒ êµí™˜í•˜ê²Œ ë˜ë©´ ì›ë˜ì˜ 94ê°€ ëœë‹¤.

# ì •í•´ì§„ íšŸìˆ˜ë§Œí¼ ìˆ«ìíŒì„ êµí™˜í–ˆì„ ë•Œ ë°›ì„ ìˆ˜ ìˆëŠ” ê°€ì¥ í° ê¸ˆì•¡ì„ ê³„ì‚°í•´ë³´ì.

# [ì…ë ¥]


# ê°€ì¥ ì²« ì¤„ì€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ìˆ˜ì´ë‹¤.

# ìµœëŒ€ 10ê°œì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í‘œì¤€ ì…ë ¥ì„ í†µí•˜ì—¬ ì£¼ì–´ì§„ë‹¤.

# ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì—ëŠ” ìˆ«ìíŒì˜ ì •ë³´ì™€ êµí™˜ íšŸìˆ˜ê°€ ì£¼ì–´ì§„ë‹¤.

# ìˆ«ìíŒì˜ ì •ë³´ëŠ” ì •ìˆ˜í˜• ìˆ«ìë¡œ ì£¼ì–´ì§€ê³  ìµœëŒ€ ìë¦¿ìˆ˜ëŠ” 6ìë¦¬ì´ë©°, ìµœëŒ€ êµí™˜ íšŸìˆ˜ëŠ” 10ë²ˆì´ë‹¤.

# [ì¶œë ¥]

# ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§ˆë‹¤, ì²« ì¤„ì—ëŠ” â€œ#Câ€ë¥¼ ì¶œë ¥í•´ì•¼ í•˜ëŠ”ë° CëŠ” ì¼€ì´ìŠ¤ ë²ˆí˜¸ì´ë‹¤.

# ê°™ì€ ì¤„ì— ë¹ˆ ì¹¸ì„ í•˜ë‚˜ ì‚¬ì´ì— ë‘ê³  êµí™˜ í›„ ë°›ì„ ìˆ˜ ìˆëŠ” ê°€ì¥ í° ê¸ˆì•¡ì„ ì¶œë ¥í•œë‹¤.

# DFSì™€ ë°±íŠ¸ë˜í‚¹
# ê¹Šì´ ìš°ì„  íƒìƒ‰(DFS)

# DFSëŠ” ê°€ëŠ¥í•œ ëª¨ë“  ê²½ë¡œ(í›„ë³´)ë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¶ˆí•„ìš”í•  ê²ƒ ê°™ì€ ê²½ë¡œë¥¼ ì‚¬ì „ì— ì°¨ë‹¨í•˜ê±°ë‚˜ í•˜ëŠ” ë“±ì˜ í–‰ë™ì´ ì—†ìœ¼ë¯€ë¡œ ê²½ìš°ì˜ ìˆ˜ë¥¼ ì¤„ì´ì§€ ëª»í•©ë‹ˆë‹¤.

# ë”°ë¼ì„œ N! ê°€ì§€ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°€ì§„ ë¬¸ì œëŠ” DFSë¡œ ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥í•  ê²ƒì…ë‹ˆë‹¤.

# ë°±íŠ¸ë˜í‚¹(Backtracking)

# í•´ë¥¼ ì°¾ì•„ê°€ëŠ” ë„ì¤‘, ì§€ê¸ˆì˜ ê²½ë¡œê°€ í•´ê°€ ë  ê²ƒ ê°™ì§€ ì•Šìœ¼ë©´ ê·¸ ê²½ë¡œë¥¼ ë”ì´ìƒ ê°€ì§€ ì•Šê³  ë˜ëŒì•„ê°‘ë‹ˆë‹¤.

# ì¦‰, ì½”ë”©ì—ì„œëŠ” ë°˜ë³µë¬¸ì˜ íšŸìˆ˜ê¹Œì§€ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ íš¨ìœ¨ì ì…ë‹ˆë‹¤.

# ì´ë¥¼ ê°€ì§€ì¹˜ê¸°ë¼ê³  í•˜ëŠ”ë°, ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì³ë‚´ê³  ìµœëŒ€í•œ ì˜¬ë°”ë¥¸ ìª½ìœ¼ë¡œ ê°„ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

# ì¼ë°˜ì ìœ¼ë¡œ, ë¶ˆí•„ìš”í•œ ê²½ë¡œë¥¼ ì¡°ê¸°ì— ì°¨ë‹¨í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ê²½ìš°ì˜ ìˆ˜ê°€ ì¤„ì–´ë“¤ì§€ë§Œ, ë§Œì•½ N!ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°€ì§„ ë¬¸ì œì—ì„œ ìµœì•…ì˜ ê²½ìš°ì—ëŠ” ì—¬ì „íˆ ì§€ìˆ˜í•¨ìˆ˜ ì‹œê°„ì„ í•„ìš”ë¡œ í•˜ë¯€ë¡œ ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê°€ì§€ì¹˜ê¸°ë¥¼ ì–¼ë§ˆë‚˜ ì˜í•˜ëŠëƒì— ë”°ë¼ íš¨ìœ¨ì„±ì´ ê²°ì •ë˜ê²Œ ë©ë‹ˆë‹¤.

# ì •ë¦¬í•˜ìë©´, ë°±íŠ¸ë˜í‚¹ì€ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ìš°ì˜ ìˆ˜ ì¤‘ì—ì„œ íŠ¹ì •í•œ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ë§Œ ì‚´í´ë³´ëŠ” ê²ƒì…ë‹ˆë‹¤.

# ì¦‰ ë‹µì´ ë  ë§Œí•œì§€ íŒë‹¨í•˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê·¸ ë¶€ë¶„ê¹Œì§€ íƒìƒ‰í•˜ëŠ” ê²ƒì„ í•˜ì§€ ì•Šê³  ê°€ì§€ì¹˜ê¸° í•˜ëŠ” ê²ƒì„ ë°±íŠ¸ë˜í‚¹ì´ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.
# ì£¼ë¡œ ë¬¸ì œ í’€ì´ì—ì„œëŠ” DFS ë“±ìœ¼ë¡œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì—ì„œ, ì¡°ê±´ë¬¸ ë“±ì„ ê±¸ì–´ ë‹µì´ ì ˆëŒ€ë¡œ ë  ìˆ˜ ì—†ëŠ” ìƒí™©ì„ ì •ì˜í•˜ê³ , ê·¸ëŸ¬í•œ ìƒí™©ì¼ ê²½ìš°ì—ëŠ” íƒìƒ‰ì„ ì¤‘ì§€ì‹œí‚¨ ë’¤ ê·¸ ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ì„œ ë‹¤ì‹œ ë‹¤ë¥¸ ê²½ìš°ë¥¼ íƒìƒ‰í•˜ê²Œë” êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
# ğŸ‘ ë°±íŠ¸ë˜í‚¹ ê¸°ë²•ì˜ ìœ ë§ì„± íŒë‹¨
# ì–´ë–¤ ë…¸ë“œì˜ ìœ ë§ì„±, ì¦‰ í•´ê°€ ë  ë§Œí•œì§€ íŒë‹¨í•œ í›„ ìœ ë§í•˜ì§€ ì•Šë‹¤ê³  ê²°ì •ë˜ë©´ ê·¸ ë…¸ë“œì˜ ì´ì „(ë¶€ëª¨)ë¡œ ëŒì•„ê°€(Backtracking) ë‹¤ìŒ ìì‹ ë…¸ë“œë¡œ ê°‘ë‹ˆë‹¤.

# í•´ê°€ ë  ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë©´ ìœ ë§í•˜ë‹¤(promising)ê³  í•˜ë©°, ìœ ë§í•˜ì§€ ì•Šì€ ë…¸ë“œì— ê°€ì§€ ì•ŠëŠ” ê²ƒì„ ê°€ì§€ì¹˜ê¸°(pruning) í•œë‹¤ê³  í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

# https://chanhuiseok.github.io/posts/baek-1/ : ì°¸ê³  ë¬¸ì œ


# í’€ì´

# ì‹œê°„ ë³µì¡ë„ê°€ ìµœëŒ€ 6ìë¦¿ìˆ˜ì—ì„œ 2ê°œë¥¼ êµí™˜í•˜ëŠ” ë°©ì‹ì´ë¯€ë¡œ 6C2 = 15 ^ 10 ì´ë¯€ë¡œ ì‹œê°„ ë³µì¡ë„ê°€ ë§¤ìš° í¬ë‹¤ -> ê·¸ë˜ì„œ ê°€ì§€ì¹˜ê¸° í•„ìš”

# ë°±íŠ¸ë˜í‚¹ ì‚¬ìš©

# ì¢…ë£Œ ì¡°ê±´ : êµí™˜ íšŸìˆ˜ê°€ ëë‚  ë•Œê¹Œì§€ ìµœëŒ“ê°’ ë°˜í™˜


# ë‚´ í’€ì´

def dfs(change):
    global max_money 
    if change == max_change: # êµí™˜ íšŸìˆ˜ê°€ ìµœëŒ€ êµí™˜ íšŸìˆ˜ì™€ ê°™ì•„ì§€ë©´
        changed = ''.join(num_table) # ë°”ê¾¼ ìˆ«ìíŒì„ ë¬¸ìì—´ë¡œ ë³€í™˜
        max_money = max(max_money, changed) # ê¸ˆì•¡ ìµœëŒ“ê°’ì€ ê¸ˆì•¡ ìµœëŒ“ê°’ê³¼ ë°”ê¾¼ ìˆ«ìíŒì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•œ ê²ƒì¤‘ í° ê²ƒì„ ìµœëŒ“ê°’ìœ¼ë¡œ ê°±ì‹ 
        return 
    
    for i in range(len(num_table)): # ë‘ ê°œì”© ë½‘ì•„ì„œ ì¡°í•©ì„ ë§Œë“¤ì–´ ë¹„êµí•œë‹¤. 
        for j in range(i+1, len(num_table)): 
            num_table[i], num_table[j] = num_table[j], num_table[i] # êµí™˜
            changed = ''.join(num_table) # ìˆ«ìíŒì„ ë°”ê¾¸ë©´ í•©ì³ì„œ ë¬¸ìì—´ë¡œ ë§Œë“¤ì–´ì„œ ë¹„êµ
            if visited.get((changed, change), 1): # ê°€ì§€ì¹˜ê¸° : visitedì— (ë°”ê¾¼ ìˆ«ìíŒ, êµí™˜ íšŸìˆ˜) keyê°€ ì—†ìœ¼ë©´ 1ë¡œ ì²˜ë¦¬ -> ë°©ë¬¸í•œ ì ì´ ì—†ìœ¼ë©´ 1 
                visited[(changed, change)] = 0 # ë°©ë¬¸ì„ í•˜ë©´ 0ìœ¼ë¡œ ë°”ê¿” ë‹¤ìŒì— ë‹¤ì‹œ ë°©ë¬¸í•˜ì§€ ì•Šê²Œ ì²˜ë¦¬ (ë°©ë¬¸í–ˆë˜ ê³³ ì¤‘ë³µ ë°©ì§€)
                dfs(change+1) # ë°”ê¾¼ íšŸìˆ˜ +1í•´ì„œ dfs ë‹¤ì‹œ í˜¸ì¶œ
            num_table[i], num_table[j] = num_table[j], num_table[i] # ë‹¤ë¥¸ ê²½ë¡œ íƒìƒ‰ì„ ìœ„í•´ ë‹¤ì‹œ i, j ëŒë ¤ë†“ê¸°


T = int(input())
for test_case in range(1, T + 1):
    num_table, max_change = input().split() # ìˆ«ìíŒ, êµí™˜ íšŸìˆ˜
    num_table = list(num_table)
    max_change = int(max_change)
    max_money = "0" # ê¸ˆì•¡ì˜ ìµœëŒ“ê°’
    visited = {} # ë°©ë¬¸í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë”•ì…”ë„ˆë¦¬
    dfs(0)
    print("#{} {}".format(test_case, max_money))


